rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // This rule allows the owner of the user ID to read and write their private data
    match /artifacts/{appId}/users/{userId}/{documentId}/{...} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}
**If you are running in a Canvas environment**, the necessary rule is already provided in the setup. If you are seeing this error, it may indicate that the user ID or collection path used in the code doesn't exactly match the secure path.

**The code uses the correct path:** `/artifacts/${appId}/users/${userId}/${COLLECTION_PATH}`. Since this path is correct, the issue is environmental. Please ensure the path is configured correctly in your Firebase security rules. If you are running locally, ensure your Firebase project is properly set up.